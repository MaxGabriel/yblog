#!/usr/bin/env zsh

[[ ! -e .cabal-sandbox ]] && cabal sandbox init || { print -- "Couldn't initialize cabal sandbox" >&2; exit 1 }

compileAndPreview(){
    print -- "Compiling and building"
    cabal install && \
    ./site clean && \
    while true; do ./site preview; done
}

./watch-multi & compileAndPreview
